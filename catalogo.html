<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Animais para Adoção</title>
  <link rel="stylesheet" href="css/geral.css">
</head>
<body>
  <!-- MENU -->
<div id="menu">
  <div><a href="index.html">Início</a></div>
  <div><a href="catalogo.html">Animais para Adoção</a></div>
  <div><a href="faleconosco.html">Cadastrar Animal</a></div>
  <div><a href="ajudar.html">Como Ajudar</a></div>
  <div><a href="sobre.html">Sobre</a></div>
  <div><a href="contatos.html">Contato</a></div>
</div>

  <div id="topo">
    <h1>Animais Disponíveis para Adoção</h1>
  </div>

  <div id="catalogo"></div>

  <script>
    const catalogo = document.getElementById("catalogo");
    let animais = JSON.parse(localStorage.getItem("animais")) || [];

    function salvarAnimais() {
      localStorage.setItem("animais", JSON.stringify(animais));
    }

    function renderCatalogo() {
      catalogo.innerHTML = "";
      if (animais.length === 0) {
        catalogo.innerHTML = "<p>Nenhum animal cadastrado ainda.</p>";
        return;
      }

      animais.forEach((a, i) => {
        const div = document.createElement("div");
        div.className = "animal";
        div.innerHTML = `
          ${a.imagem ? `<img src="${a.imagem}" alt="Imagem do animal">` : ""}
          <h3>${a.nome}</h3>
          <p><strong>Descrição:</strong> ${a.descricao}</p>
          <p><strong>Localização:</strong> ${a.localizacao}</p>
          <p><strong>Saúde:</strong> ${a.saude}</p>
          <button onclick="editarAnimal(${i})">Editar</button>
          <button onclick="excluirAnimal(${i})">Excluir</button>
          <button onclick="adotarAnimal(${i})">Adotar</button>
        `;
        catalogo.appendChild(div);
      });
    }

    function excluirAnimal(index) {
      if (confirm("Tem certeza que deseja excluir este animal?")) {
        animais.splice(index, 1);
        salvarAnimais();
        renderCatalogo();
      }
    }

    function editarAnimal(index) {
      const animal = animais[index];
      const novoNome = prompt("Novo nome:", animal.nome);
      const novaDesc = prompt("Nova descrição:", animal.descricao);
      const novaLocal = prompt("Nova localização:", animal.localizacao);
      const novaSaude = prompt("Novo estado de saúde:", animal.saude);
      const novaImg = prompt("Nova URL da imagem (opcional):", animal.imagem);

      if (novoNome && novaDesc && novaLocal && novaSaude) {
        animais[index] = {
          nome: novoNome,
          descricao: novaDesc,
          localizacao: novaLocal,
          saude: novaSaude,
          imagem: novaImg
        };
        salvarAnimais();
        renderCatalogo();
      }
    }

    function adotarAnimal(index) {
      localStorage.setItem("adocaoSelecionada", JSON.stringify(animais[index]));
      window.location.href = "formulario.html";
    }

    renderCatalogo();
  </script>
</body>
</html>





const perfil = localStorage.getItem("perfil");  // perfil salvo no login

function renderCatalogo() {
  catalogo.innerHTML = "";
  if (animais.length === 0) {
    catalogo.innerHTML = "<p>Nenhum animal cadastrado ainda.</p>";
    return;
  }

  animais.forEach((a, i) => {
    const div = document.createElement("div");
    div.className = "animal";

    // Botões padrão - só Adotar para usuários normais
    let botoes = `<button onclick="adotarAnimal(${i})">Adotar</button>`;

    // Se for admin, adiciona editar e excluir
    if (perfil === "admin") {
      botoes = `
        <button onclick="editarAnimal(${i})">Editar</button>
        <button onclick="excluirAnimal(${i})">Excluir</button>
        ${botoes}
      `;
    }

    div.innerHTML = `
      ${a.imagem ? `<img src="${a.imagem}" alt="Imagem do animal">` : ""}
      <h3>${a.nome}</h3>
      <p><strong>Descrição:</strong> ${a.descricao}</p>
      <p><strong>Localização:</strong> ${a.localizacao}</p>
      <p><strong>Saúde:</strong> ${a.saude}</p>
      ${botoes}
    `;

    catalogo.appendChild(div);
  });
}

